<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
	class="no-js">
<head>
<meta charset="UTF-8">
<head>
<!-- Mobile Specific Meta -->
<meta name="viewport"
	content="width=device-width, initial-scale=1, shrink-to-fit=no">
<!-- Favicon-->
<link rel="shortcut icon" th:href="@{/img/logo_small.png}">
<!-- Author Meta -->
<meta name="author" content="CodePixar">
<!-- Meta Description -->
<meta name="description" content="">
<!-- Meta Keyword -->
<meta name="keywords" content="">
<!-- meta character set -->
<meta charset="UTF-8">
<!-- Site Title -->
<title>7777 > 나만의 옷장</title>

<!-- CSS -->
<link rel="stylesheet" th:href="@{/css/linearicons.css}">
<link rel="stylesheet" th:href="@{/css/font-awesome.min.css}">
<link rel="stylesheet" th:href="@{/css/themify-icons.css}">
<link rel="stylesheet" th:href="@{/css/bootstrap.css}">
<link rel="stylesheet" th:href="@{/css/owl.carousel.css}">
<link rel="stylesheet" th:href="@{/css/nouislider.min.css}">
<link rel="stylesheet" th:href="@{/css/ion.rangeSlider.css}" />
<link rel="stylesheet" th:href="@{/css/ion.rangeSlider.skinFlat.css}" />
<link rel="stylesheet" th:href="@{/css/magnific-popup.css}">
<link rel="stylesheet" th:href="@{/css/image.css}">
<link rel="stylesheet" th:href="@{/css/style.css}">
<link rel="stylesheet" th:href="@{/css/main.css}">
<link rel="stylesheet" th:href="@{/css/login.css}">
<link rel="stylesheet" th:href="@{/css/button.css}">
<style>
@import
	url("https://fonts.googleapis.com/css2?family=Roboto&display=swap");

* {
	box-sizing: border-box;
}

.container2 {
	display: flex;
	width: 1040px;
	justify-content: space-evenly;
	flex-wrap: wrap;
}

.card {
	margin: 10px;
	background-color: #fff;
	border-radius: 10px;
	box-shadow: 0 2px 20px rgba(0, 0, 0, 0.2);
	overflow: hidden;
	width: 300px;
}

.card-header img {
	width: 100%;
	height: 350px;
	object-fit: cover;
}

.card-body {
	display: flex;
	flex-direction: column;
	justify-content: center;
	align-items: flex-start;
	padding: 20px;
	min-height: 150px;
	height: 100px;
}

.tag {
	background: #cccccc;
	border-radius: 50px;
	font-size: 12px;
	margin: 0;
	color: #fff;
	padding: 2px 10px;
	text-transform: uppercase;
	cursor: pointer;
}

.tag-teal {
	background-color: #5cd3f0;
}

.tag-purple {
	background-color: #5e76bf;
}

.tag-pink {
	background-color: #cd5b9f;
}

.card-body p {
	font-size: 13px;
	margin: 0 0 40px;
	color: black;
}

.user {
	display: flex;
	margin-top: auto;
}

.user img {
	border-radius: 50%;
	width: 40px;
	height: 40px;
	margin-right: 10px;
}

.user-info h5 {
	margin: 0;
}

.user-info small {
	color: #545d7a;
}

#nickname .tag {
	padding: 10px;
	border-radius: 2px;
	font-weight: 100;
	display: inline-block;
}

.nav-link:hover {
	color: #5CD3F0 !important;
	background-color: #fff !important;
}

.nice-select {
	display: inline-block;
}

.button-27 {
	min-width: 50px!important;
	min-height: 10px!important;
}

#big_category {
	display: inline-block !important;
}

#small_category {
	display: inline-block !important;
}

#image {
	padding: 20px;
}

.nav-link:hover {
	color: #5CD3F0 !important;
	background-color: #fff !important;
}

input{
	width: 0px!important;
}
</style>
</head>
<body>

	<header class="header_area sticky-header">
		<div class="main_menu">
			<nav class="navbar navbar-expand-lg navbar-light main_box">
				<div class="container">
					<!-- Brand and toggle get grouped for better mobile display -->
					<a class="navbar-brand logo_h" th:href="@{/closet}"><img
						th:src="@{/img/logo.png}" alt="" style="width: 70px;"></a>
					<button class="navbar-toggler" type="button" data-toggle="collapse"
						data-target="#navbarSupportedContent"
						aria-controls="navbarSupportedContent" aria-expanded="false"
						aria-label="Toggle navigation">
						<span class="icon-bar"></span> <span class="icon-bar"></span> <span
							class="icon-bar"></span>
					</button>
					<!-- Collect the nav links, forms, and other content for toggling -->
					<div class="collapse navbar-collapse offset"
						id="navbarSupportedContent">
						<ul class="nav navbar-nav menu_nav ml-auto">
							<li class="nav-item"><a class="nav-link"
								th:href="@{/closet}" style="font-size: 11pt;">Home</a></li>

							<li class="nav-item submenu dropdown"><a th:href="@{/#}"
								class="nav-link dropdown-toggle" data-toggle="dropdown"
								role="button" aria-haspopup="true" aria-expanded="false"
								style="font-size: 11pt;">옷장</a>
								<ul class="dropdown-menu">
									<li class="nav-item"><a class="nav-link"
										th:href="@{/closet/upload}" style="font-size: 11pt;">나만의
											옷장 등록</a></li>
									<li class="nav-item active"><a class="nav-link"
										th:href="@{/closet/closet}" style="font-size: 11pt;">나만의
											옷장</a></li>
									<li class="nav-item"><a class="nav-link"
										th:href="@{/closet/diary}" style="font-size: 11pt;">다이어리</a></li>
								</ul></li>
							<li class="nav-item submenu dropdown"><a th:href="@{/#}"
								class="nav-link dropdown-toggle" data-toggle="dropdown"
								role="button" aria-haspopup="true" aria-expanded="false"
								style="font-size: 11pt;">코디</a>
								<ul class="dropdown-menu">
									<li class="nav-item"><a class="nav-link"
										th:href="@{/weather.html}" style="font-size: 11pt;">날씨별 코디
											추천</a></li>
									<li class="nav-item"><a class="nav-link"
										th:href="@{/color.html}" style="font-size: 11pt;">색조합 코디
											추천</a></li>
								</ul></li>
							<li class="nav-item"><a class="nav-link"
								th:href="@{/closet/community}" style="font-size: 11pt;">커뮤니티</a></li>
							<li class="nav-item submenu dropdown"><a th:href="@{/#}"
								class="nav-link dropdown-toggle" data-toggle="dropdown"
								role="button" aria-haspopup="true" aria-expanded="false"
								style="font-size: 11pt;">고객센터</a>
								<ul class="dropdown-menu">
									<li class="nav-item"><a class="nav-link"
										th:href="@{/closet/notice}" style="font-size: 11pt;">공지사항
									</a></li>
									<li class="nav-item"><a class="nav-link"
										th:href="@{/closet/contact}" style="font-size: 11pt;">CONTACT
									</a></li>
								</ul></li>
							<li class="nav-item"><a class="nav-link"
								th:href="@{/closet/mypage}" style="font-size: 11pt;">마이페이지</a></li>
							<li class="nav-item"><a class="nav-link"
								th:href="@{/closet/login}" sec:authorize="isAnonymous()"
								style="font-size: 11pt;">Login</a> <a class="nav-link"
								th:href="@{/closet/logout}" sec:authorize="isAuthenticated()"
								style="font-size: 11pt;">Logout</a></li>
						</ul>
					</div>
				</div>
			</nav>
		</div>
	</header>
</head>


<body>
	<br>
	<br>
	<br>
	<br>
	<br>
	<br>
	<br>
	<br>
	<center>
		<img th:src="@{/img/ddd.png}" alt="" style="width: 250px;">
		<h3>사용자가 등록한 옷이 보이는 화면입니다.</h3>
	</center>
	<br>
	<br>

	<!-- 대분류, 소분류 조회 부분 -->
<body onload="getBigCategory()">
	<div id="select"
		style="text-align: center; position: relative; z-index: 2;">
		<form action="/closet/imagePathList" method="post">
			<input type="hidden" th:name="${_csrf.parameterName}"
				th:value="${_csrf.token}" /> <select name="clothes"
				id="big_category" onchange="getSmallCategory(this);"></select>&nbsp;
			<select name="clothes" id="small_category"
				onchange="getImagePathList(this);"></select>&nbsp;
		</form>
	</div>
	<br>
	<br>
	<br>

	<!-- 이미지가 출력되는 부분 -->
	<center>
		<div class="container2"></div>
	</center>
	<br>
	<br>
	<br>
	<br>


	<!-- start product Area -->
	<div class="single-product-slider"
		style="position: relative; z-index: 1;">
		<div class="container">
			<div class="row justify-content-center">
				<div class="col-lg-6 text-center">
					<div class="section-title">
						<div class="row"></div>
					</div>
				</div>
			</div>
		</div>
	</div>





	<!-- End related-product Area -->

	<!-- start footer Area -->
	<footer class="footer-area section_gap">
		<div class="container">
			<div class="row">
				<div class="col-lg-3  col-md-6 col-sm-6">
					<div class="single-footer-widget">
						<h6>비트교육센터 3조 7777</h6>
						<img th:src="@{/img/logo.png}" alt=""
							style="width: 80px; max-width: 100%; height: auto;">
					</div>
				</div>
				<div class="col-lg-3  col-md-6 col-sm-6">
					<div class="single-footer-widget">
						<h6>GITHUB</h6>
						<p></p>
						<div class="footer-social d-flex align-items-center">
							<a
								th:href="@{https://github.com/orgs/BitFinalProject2022/repositories}"
								target="_blank"><img th:src="@{/img/github.png}" alt=""
								style="width: 60px;"></a>
						</div>
					</div>
				</div>
				<div class="col-lg-3  col-md-6 col-sm-6">
					<div class="single-footer-widget mail-chimp">
						<h6 class="mb-20">QUICK MENU</h6>
						<a th:href="@{/closet/upload}"> - 나만의 옷 등록</a><br> <a
							th:href="@{/closet/closet}"> - 나만의 옷장</a><br> <a
							th:href="@{/closet/diary}"> - 다이어리</a><br> <a
							th:href="@{/closet/community}"> - 커뮤니티</a><br> <a
							th:href="@{/closet/contact}"> - CONTACT US</a><br> <a
							th:href="@{/closet/login}" sec:authorize="isAnonymous()"> -
							LOGIN</a> <a th:href="@{/closet/logout}"
							sec:authorize="isAuthenticated()"> - LOGOUT</a>
					</div>
				</div>
				<div class="col-lg-2 col-md-6 col-sm-6">
					<div class="single-footer-widget">
						<h6>ADDRESS</h6>
						<p style="color: #5CD3F0;">서울특별시 서초구 서초대로74길33 비트빌 3층</p>
						<div class="footer-social d-flex align-items-center"></div>
					</div>
				</div>
			</div>
			<br> <br>
			<div
				class="footer-bottom d-flex justify-content-center align-items-center flex-wrap"
				style="color: black;">
				<p class="footer-text m-0">Copyright 2022. 7777 all rights
					reserved.</p>
			</div>
		</div>
	</footer>
	<!-- End footer Area -->

	<script type="text/javascript">

		// 대분류 항목 가져오기
		async function getBigCategory() {  // context_root 뺐음
		    const targetUrl = "/closet/bigCategoryList";

		    let formData = new FormData();

		    const options = {
		        method: "post",
		        body: formData,
		    }

		    try {
		        let response = await fetch(targetUrl, options);
		        let bigCategory_list = await response.json();
		        //console.log(bigCategory_list);

		        let sel = document.querySelector('#big_category');
		        //console.log(sel)
		        for (let item of bigCategory_list) {
		            let option = document.createElement('option');
		            //console.log(option)
					
		            option.value = item.big_category_code;
		            option.innerText = item.big_category_name;
		            sel.append(option);
		            //console.log(option.innerText)
		        }
		        //select_option('#sido_parent option', index);
		        sel.dispatchEvent(new Event('change'));

		    }
		    catch (err) {
		        console.log(err);
		    }
		};


		// 소분류 항목 가져오기
		async function getSmallCategory(selectedItem) { // context_root 뺐음
		    const targetUrl = "/closet/smallCategoryList";
		
		    //let selectedItem = document.querySelector("#big_category");	// 아이디가 "big_category"인 요소를 선택함.
		    let targetValue = selectedItem.value;
			
		    let formData = new FormData();
		    formData.append('big_category_code', targetValue); // 앞에서 선택한 대분류 코드를 넣어준다.
		    //console.log(selectedItem);
		    //console.log(targetValue);

		    const options = {
		        method: "post",
		        body: formData,
		    }

		    try {
		        let response = await fetch(targetUrl, options);
		        let smallCategory_list = await response.json();
		        //console.log(smallCategory_list);

		        let sel = document.querySelector('#small_category');
		        deleteOptions(sel);
		        //console.log(sel);
				
		        for (let item of smallCategory_list) {
		            let option = document.createElement('option');
		            option.value = item.small_category_code;
		            option.innerText = item.small_category_name;
		            sel.append(option);
		            //console.log(option.innerText)
		        }
		        //select_option('#sido_child option', index);
		        sel.dispatchEvent(new Event('change'));
		    } catch (err) {
		    	console.log(err);
		    }
		};
		
		/*
		async function getImagePathList(selectedItem) { // context_root 뺐음
		    const targetUrl = "/closet/imagePathList";
			
		    let selectedBigItem = document.querySelector("#big_category");	// 아이디가 "big_category"인 요소를 선택함.
		    let targetValue2 = selectedBigItem.value;
		    
		    let targetValue = selectedItem.value;
		    targetValue = parseInt(targetValue);
		    //console.log(targetValue2);
		    //console.log(targetValue);
		    
		    let formData = new FormData();
		    formData.append('bigCategoryCode', targetValue2); // 앞에서 선택한 대분류 코드를 넣어준다.
		    formData.append('small_category_code', targetValue); // 앞에서 선택한 소분류 코드를 넣어준다.
		    
		    const options = {
		        method: "post",
		        body: formData,
		    }
			
		    try {
		        let response = await fetch(targetUrl, options);
		        let imagePathList = await response.json();
		        console.log(imagePathList);

		    } catch (err) {
		    	console.log(err);
		    }
		};
		*/
		
		
		// userId, imagePath 가져오기
		async function getImagePathList(selectedItem) { // context_root 뺐음
		    const targetUrl = "/closet/imagePathList";
			
		    let selectedBigItem = document.querySelector("#big_category");	// 아이디가 "big_category"인 요소를 선택함.
		    let targetValue2 = selectedBigItem.value;
		    
		    let targetValue = selectedItem.value;
		    targetValue = parseInt(targetValue);
		    //console.log(targetValue2);
		    //console.log(targetValue);
		    
		    let formData = new FormData();
		    formData.append('bigCategoryCode', targetValue2); // 앞에서 선택한 대분류 코드를 넣어준다.
		    formData.append('small_category_code', targetValue); // 앞에서 선택한 소분류 코드를 넣어준다.
		    
		    const options = {
		        method: "post",
		        body: formData,
		    }
			
		    try {
		        let response = await fetch(targetUrl, options);
		        let imagePath_list = await response.json();
		        //console.log(imagePath_list);
				
		        document.querySelector('.container2').innerHTML = ""; // 그 전에 조회했던 항목들 삭제
		        
		        for (let item of imagePath_list) {
		            let img = document.createElement('img');
		            
		            let timehtml = ""
		            timehtml+="<div class='card'>";
		            timehtml+="<div class='card-header'>";
		            timehtml+="<input class='button-27'+ type= 'button'"+  "value='삭제'" + "onclick= 'delOk()'/>";
		            timehtml+="<div id='image' style='text-align: center; padding: 20px;'>";
		            timehtml+="<img src=" + "/image/closet/" + item.userId + "/" + item.imageName + ">";
		            timehtml+="</div>";
		            timehtml+="</div>";
		            timehtml+="</div>";
		            
		            $('.container2').append(timehtml);
		            
		        }
		        
		    } catch (err) {
		    	console.log(err);
		    }
		};
		
		
		/*
		// userId, imagePath 가져오기
		async function getImagePathList(selectedItem) { // context_root 뺐음
		    const targetUrl = "/closet/imagePathList";
			
		    let selectedBigItem = document.querySelector("#big_category");	// 아이디가 "big_category"인 요소를 선택함.
		    let targetValue2 = selectedBigItem.value;
		    
		    let targetValue = selectedItem.value;
		    targetValue = parseInt(targetValue);
		    console.log(targetValue2);
		    console.log(targetValue);
		    
		    let formData = new FormData();
		    formData.append('bigCategoryCode', targetValue2); // 앞에서 선택한 대분류 코드를 넣어준다.
		    formData.append('small_category_code', targetValue); // 앞에서 선택한 소분류 코드를 넣어준다.
		    
		    let image = new Image();
		    const options = {
		        method: "post",
		        body: formData,
		    }
			
		    try {
		        let response = await fetch(targetUrl, options);
		        let imagePath_list = await response.json();
		        //console.log(imagePath_list);
				
		        document.querySelector('#image').innerHTML = ""; // 그 전에 조회했던 항목들 삭제
		        
		        for (let item of imagePath_list) {
		            let img = document.createElement('img');
		            
		            //img.src = '/image/' + item.userId + '/' + item.imageName;
		            img.src = '/image/' + 'closet/' + item.userId + '/' + item.imageName;

		            img.setAttribute('height', 400);
		            img.setAttribute('width', 250);
		            img.setAttribute('style', "padding:15px;");
		            img.style.marginLeft = -(img.width/2);


		           
		            // let image = document.querySelector('#image').appendChild(img);
		            let image = document.querySelector('#image').appendChild(img);
		            //console.log(img.src)
		            
		        }
		        
		    } catch (err) {
		    	console.log(err);
		    }
		};
		*/
		
		// 기존의 항목들 지우기
		function deleteOptions(dropBox) {
		    while (dropBox.options.length > 0) {
		        dropBox.remove(0);
		    }
		};
	</script>


	<script th:src="@{/js/vendor/jquery-2.2.4.min.js}"></script>
	<script
		th:src="@{https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js}"></script>
	<script th:src="@{/js/vendor/bootstrap.min.js}"></script>
	<script th:src="@{/js/jquery.ajaxchimp.min.js}"></script>
	<script th:src="@{/js/jquery.nice-select.min.js}"></script>
	<script th:src="@{/js/jquery.sticky.js}"></script>
	<script th:src="@{/js/nouislider.min.js}"></script>
	<script th:src="@{/js/jquery.magnific-popup.min.js}"></script>
	<script th:src="@{/js/owl.carousel.min.js}"></script>
	<!--gmaps Js-->
	<script
		th:src="@{https://maps.googleapis.com/maps/api/js?key=AIzaSyCjCGmQ0Uq4exrzdcL6rvxywDDOvfAu6eE}"></script>
	<script th:src="@{/js/gmaps.min.js}"></script>
	<script th:src="@{/js/main.js}"></script>
	<script>
		function delOk(){
			if(!confirm('삭제하시면 복구할 수 없습니다. \n정말로 삭제하시겠습니까?')){
				return false;
			}
		}
		</script>
</body>

</html>
